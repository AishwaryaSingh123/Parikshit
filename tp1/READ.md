<h1>WHAT ALL IS THERE?</h1>

<p>This folder contains all the files needed to toggle ‘n’ LEDs alternatively ‘m’ number of times.</p>

<h2>We have:</h2>
<ol>
  <li><i>led.h:</i> is the header file that:
    <ul>
      <li>defines the LED structure (the data model for each LED),</li>
      <li>declares all LED-related functions,</li>
      <li>and provides include guards so it can be safely used in multiple files (<code>main.c</code>, <code>led.c</code>, etc.).</li>
    </ul>
  </li>

  <li><i>led.c:</i> is the source file that:
    <ul>
      <li>contains the actual definitions (implementations) of all the functions declared in <code>led.h</code>,</li>
      <li>initializes and controls the behavior of LEDs using STM32 HAL GPIO functions,</li>
      <li>manages operations like turning LEDs ON/OFF, toggling them, and handling multiple LEDs in an array,</li>
      <li>and serves as the core logic layer between the hardware (GPIO pins) and the application code in <code>main.c</code>.</li>
    </ul>
  </li>

  <li><i>main.h:</i> is the main header file that:
    <ul>
      <li>includes all necessary system and peripheral headers required by the main program,</li>
      <li>contains global variables, macros, and function prototypes shared with <code>main.c</code>,</li>
      <li>acts as a bridge between user-defined modules (like <code>led.h</code>) and STM32 HAL libraries,</li>
      <li>and ensures that the main application has access to configuration settings and peripheral definitions generated by STM32CubeMX.</li>
    </ul>
  </li>

  <li><i>main.c:</i> is the main source file that:
    <ul>
      <li>serves as the entry point of the STM32 program where execution begins,</li>
      <li>initializes the microcontroller system, clock configuration, and all peripherals,</li>
      <li>includes <code>led.h</code> to use the LED functions defined in <code>led.c</code>,</li>
      <li>contains the main control logic inside the <code>while(1)</code> loop to run the LED operations continuously,</li>
      <li>and coordinates between hardware initialization and user-defined functionalities.</li>
    </ul>
  </li>
</ol>

<h2>Changes in <code>main.c</code>:</h2>
<ul>
  <li><b>Included <code>led.h</code>:</b> 
    <ul>
      <li>Added <code>#include "led.h"</code> at the top of the file.</li>
      <li>This allows the main program to access LED-related structures and functions declared in the header file.</li>
    </ul>
  </li>

  <li><b>Declared LED array pointer:</b> 
    <ul>
      <li>Created a variable like <code>LED *led_array;</code> before or inside the <code>main()</code> function.</li>
      <li>This pointer stores multiple LED objects, making it easy to manage several LEDs at once.</li>
    </ul>
  </li>

  <li><b>Initialized LEDs in <code>main()</code>:</b> 
    <ul>
      <li>Added a line such as <code>led_array = LED_Init_Array(3);</code> after the hardware and GPIO initialization.</li>
      <li>This dynamically allocates and sets up LED structures with their ports and pins.</li>
    </ul>
  </li>

  <li><b>Replaced manual GPIO toggling with LED functions:</b> 
    <ul>
      <li>Instead of directly using <code>HAL_GPIO_TogglePin()</code> inside the loop, we used <code>LED_Toggle_Alternately(led_array, 3, 10);</code>.</li>
      <li>This improves modularity, readability, and reusability of LED control code.</li>
    </ul>
  </li>

  <li><b>Ensured infinite operation in the <code>while(1)</code> loop:</b> 
    <ul>
      <li>Placed the LED toggling function inside <code>while(1)</code> to make the LEDs blink continuously.</li>
      <li>This matches the embedded system requirement where tasks repeat indefinitely.</li>
    </ul>
  </li>
</ul>

<h2>Function Description Table</h2>

<table border="1" cellspacing="0" cellpadding="6">
  <tr>
    <th>Function Name</th>
    <th>Return Type</th>
    <th>Parameters</th>
    <th>Description</th>
  </tr>
  <tr>
    <td><code>LED_Init</code></td>
    <td><code>void</code></td>
    <td><code>LED *led, GPIO_TypeDef *port, uint16_t pin</code></td>
    <td>Initializes a single LED structure by assigning its GPIO port and pin number.</td>
  </tr>
  <tr>
    <td><code>LED_On</code></td>
    <td><code>void</code></td>
    <td><code>LED *led</code></td>
    <td>Turns ON the specified LED by setting its GPIO pin to HIGH.</td>
  </tr>
  <tr>
    <td><code>LED_Off</code></td>
    <td><code>void</code></td>
    <td><code>LED *led</code></td>
    <td>Turns OFF the specified LED by resetting its GPIO pin to LOW.</td>
  </tr>
  <tr>
    <td><code>LED_Toggle</code></td>
    <td><code>void</code></td>
    <td><code>LED *led</code></td>
    <td>Toggles the LED state (ON → OFF or OFF → ON).</td>
  </tr>
  <tr>
    <td><code>LED_Init_Array</code></td>
    <td><code>LED*</code></td>
    <td><code>uint8_t n</code></td>
    <td>Creates and initializes an array of <code>n</code> LEDs and returns a pointer to the array.</td>
  </tr>
  <tr>
    <td><code>LED_Toggle_Alternately</code></td>
    <td><code>void</code></td>
    <td><code>LED *led_array, uint8_t n, uint8_t m</code></td>
    <td>Toggles multiple LEDs alternately for <code>m</code> cycles, one by one in sequence.</td>
  </tr>
  <tr>
    <td><code>LED_Deinit_Array</code></td>
    <td><code>void</code></td>
    <td><code>LED *led_array, uint8_t n</code></td>
    <td>Deallocates memory used for the LED array and performs cleanup if required.</td>
  </tr>
</table>

<h2>Variable Description Table</h2>

<table border="1" cellspacing="0" cellpadding="6">
  <tr>
    <th>Variable Name</th>
    <th>Type</th>
    <th>Scope</th>
    <th>Description</th>
  </tr>
  <tr>
    <td><code>port</code></td>
    <td><code>GPIO_TypeDef*</code></td>
    <td>Member of <code>LED</code> struct</td>
    <td>Pointer to the GPIO port (e.g., GPIOA, GPIOB) controlling the LED.</td>
  </tr>
  <tr>
    <td><code>pin</code></td>
    <td><code>uint16_t</code></td>
    <td>Member of <code>LED</code> struct</td>
    <td>Specifies the GPIO pin number connected to the LED (e.g., GPIO_PIN_0).</td>
  </tr>
  <tr>
    <td><code>state</code></td>
    <td><code>uint8_t</code></td>
    <td>Member of <code>LED</code> struct</td>
    <td>Stores the current LED state — <code>0</code> for OFF, <code>1</code> for ON.</td>
  </tr>
  <tr>
    <td><code>led_array</code></td>
    <td><code>LED*</code></td>
    <td>Global / local (in <code>main.c</code>)</td>
    <td>Pointer to dynamically allocated array of LED structures for multiple LED control.</td>
  </tr>
  <tr>
    <td><code>n</code></td>
    <td><code>uint8_t</code></td>
    <td>Local (in <code>main.c</code> / <code>LED_Toggle_Alternately()</code>)</td>
    <td>Number of LEDs to toggle alternately.</td>
  </tr>
  <tr>
    <td><code>m</code></td>
    <td><code>uint8_t</code></td>
    <td>Local (in <code>main.c</code> / <code>LED_Toggle_Alternately()</code>)</td>
    <td>Number of times to repeat the alternating toggle sequence.</td>
  </tr>
  <tr>
    <td><code>i</code>, <code>j</code></td>
    <td><code>uint8_t</code></td>
    <td>Local (loop counters)</td>
    <td>Used to iterate through LED indices and repeat cycles within toggle functions.</td>
  </tr>
</table>


